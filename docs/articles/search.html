<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Searching • citationSearch</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Searching">
<meta property="og:description" content="citationSearch">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">citationSearch</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/citationSearch.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/index.html">Indexing</a>
    </li>
    <li>
      <a href="../articles/search.html">Searching</a>
    </li>
    <li>
      <a href="../articles/webscrape.html">Webscraping</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="search_files/header-attrs-2.5/header-attrs.js"></script><link href="search_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="search_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Searching</h1>
            
      
      
      <div class="hidden name"><code>search.Rmd</code></div>

    </div>

    
    
<p>This vignette describes how to search anystyle references against the solr indexes for each library.</p>
<p>Before running a search against a collection, you need to create the collection by following the instructions in the ‘Indexing’ vignette.</p>
<div id="convert-anystyle-extracted-citation-to-search-query" class="section level2">
<h2 class="hasAnchor">
<a href="#convert-anystyle-extracted-citation-to-search-query" class="anchor"></a># Convert Anystyle Extracted Citation to Search Query</h2>
<p>To convert a reference (in anystyle’s output format) into a query use the <code>search_constuct_query</code> function.</p>
<p>The fields from the anystyle data that are used in the query are “author”, “title”, “publication”, “date”, and “doi”. The rest are discarded, these include genre, page number, editor, etc. It seems unlikely that the discarded components would help to distinguish between results and noise.</p>
<p>In addition there is some preprocessing that gets applied.<br>
- The date field is converted into a 4 digit year. - Authors is converted into a string concatenating all the parsed authors - Special characters such as ‘"’, ‘,’‘, and’ are removed from the string - Only the first value in fields that sometimes have multiple is kept (sometimes a citation has multiple publishers, or titles in anystyle)</p>
<p>The query is constructed by applying the appropriate search field to each term.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">citationSearch</span><span class="op">)</span></code></pre></div>
<pre><code>## Warning: replacing previous import 'data.table::last' by 'dplyr::last' when
## loading 'citationSearch'</code></pre>
<pre><code>## Warning: replacing previous import 'data.table::first' by 'dplyr::first' when
## loading 'citationSearch'</code></pre>
<pre><code>## Warning: replacing previous import 'data.table::between' by 'dplyr::between'
## when loading 'citationSearch'</code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">anystyle_entry</span> <span class="op">=</span> <span class="va">anystyle</span><span class="op">[</span><span class="fl">1</span>, <span class="op">]</span>
<span class="va">query_string</span> <span class="op">=</span> <span class="fu"><a href="../reference/search_construct_query.html">search_construct_query</a></span><span class="op">(</span><span class="va">anystyle_entry</span><span class="op">)</span>
<span class="va">query_string</span></code></pre></div>
<pre><code>## [1] "Authors:Bailey Authors:M.A. Year:1992 Title:Final Title:Report Title:of Title:the Title:Black Title:Warrior Title:Waterdog Title:Status Title:Survey  "</code></pre>
</div>
<div id="searching-against-a-collection" class="section level1">
<h1 class="hasAnchor">
<a href="#searching-against-a-collection" class="anchor"></a>Searching Against a Collection</h1>
<p>To search against a collection you can construct a custom search using solrium as a guide: <a href="https://docs.ropensci.org/solrium/articles/search.html" class="uri">https://docs.ropensci.org/solrium/articles/search.html</a> OR using the <code>search_collection</code> function from this package.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">results</span> <span class="op">=</span> <span class="fu"><a href="../reference/search_collection.html">search_collection</a></span><span class="op">(</span><span class="st">"treesearch"</span>, <span class="va">query_string</span><span class="op">)</span>
<span class="va">results</span></code></pre></div>
<pre><code>## # A tibble: 5 x 6
##   Title             Authors              Year Publisher            score DOI    
##   &lt;chr&gt;             &lt;chr&gt;               &lt;int&gt; &lt;chr&gt;                &lt;dbl&gt; &lt;chr&gt;  
## 1 Freshwater musse… "Haag, Wendell R.;…  1998 National Forests in…  7.06 &lt;NA&gt;   
## 2 Pressure treatme… "Skolmen, Roger G.…  1973 Res. Note PSW-RN-28…  6.77 &lt;NA&gt;   
## 3 FOCUS: a fire ma… "Bratten, Frederic…  1981 Gen. Tech. Rep. PSW…  6.70 10.273…
## 4 Final Report: Sy… "Friggens, Megan M…  2015 Albuquerque, NM: U.…  6.37 &lt;NA&gt;   
## 5 Laser machining-… "McMillin, C. W.; "  1972 Southern Lumberman …  6.03 &lt;NA&gt;</code></pre>
<p><code>search_collection</code> expects the name of the collection you want to search against (one of “treesearch”, “nfsl”, “blm”), and a query string, probably generated from <code>search_construct_query</code>. Otherwise read through Lucene’s documentation for how to generate a query and use that.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by First Last.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
